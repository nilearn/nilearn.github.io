<!doctypehtml><html lang=en xmlns=http://www.w3.org/1999/xhtml><meta content=IE=Edge http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8"http-equiv=Content-Type><title>Nilearn: Statistical Analysis for NeuroImaging in Python — Machine learning for NeuroImaging</title><link href=../../_static/nature.css rel=stylesheet><link href=../../_static/pygments.css rel=stylesheet><link href=../../_static/gallery.css rel=stylesheet><link href=../../_static/gallery-binder.css rel=stylesheet><link href=../../_static/gallery-dataframe.css rel=stylesheet><script data-url_root=../../ id=documentation_options src=../../_static/documentation_options.js></script><script src=../../_static/jquery.js></script><script src=../../_static/underscore.js></script><script src=../../_static/doctools.js></script><script src=../../_static/language_data.js></script><script src=../../_static/copybutton.js></script><link rel="shortcut icon"href=../../_static/favicon.ico><link href=../../search.html rel=search title=Search><link title="9.3.15. Encoding models for visual stimuli from Miyawaki et al. 2008"href=plot_miyawaki_encoding.html rel=next><link title="9.3.13. Voxel-Based Morphometry on Oasis dataset"href=plot_oasis_vbm.html rel=prev><meta content=True name=HandheldFriendly><meta content=width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0 name=viewport><meta content="nilearn, neuroimaging, python, neuroscience, machinelearning"name=keywords><script>function updateTopMenuPosition(height, width) {
    if($(window).scrollTop() > height && $(window).outerWidth() > 1024) {
        //begin to scroll
        $('.related-wrapper').css("z-index", 1000);
        $('.related-wrapper').css("position", "sticky");
        $('.related-wrapper').css("top", 0);
        $('.related-wrapper').css("width", width)
    } else {
        //lock it back into place
        $('.related-wrapper').css("position", "relative");
        $('.related-wrapper').css("top", 0)
    }
}

$(function() {
    var banner_height = $('#logo-banner').outerHeight();
    var banner_width = $('#logo-banner').outerWidth();
    var width = $('.related-wrapper').css("height", $('.related').outerHeight());

    updateTopMenuPosition(banner_height, width);

    $(window).scroll(function(event) {
        updateTopMenuPosition(banner_height, width)
    });

    $(window).resize(function(event) {
        var banner_width = $('#logo-banner').outerWidth();
        var menu_height = $('.related').outerHeight();
        $('.related').css("width", banner_width);
        $('.related-wrapper').css("height", menu_height);
        updateTopMenuPosition(banner_height, width)
    })
});</script><script>function updateSideBarPosition(top, offset, sections) {
    var pos = $(window).scrollTop();
    // Lock the table of content to a fixed position once we scroll enough
    var topShift = 2 * offset;
    if(pos > top + topShift + 1) {
        // begin to scroll with sticky menu bar
        var topShift = -topShift + 1;
        if ($(window).outerWidth() < 1024) {
            // compensate top menu that disappears
            topShift -= offset + 1
        }
        $('.sphinxsidebarwrapper').css("position", "fixed");
        $('.sphinxsidebarwrapper').css("top", topShift)
    }
    else {
        //lock it back into place
        $('.sphinxsidebarwrapper').css("position", "relative");
        $('.sphinxsidebarwrapper').css("top",0)
    }

    // Highlight the current section
    i = 0;
    current_section = 0;
    $('a.internal').removeClass('active');
    for(i in sections) {
        if(sections[i] > pos) {
            break
        }
        if($('a.internal[href$="' + i + '"]').is(':visible')){
            current_section = i
        }
    }
    $('a.internal[href$="' + current_section + '"]').addClass('active');
    $('a.internal[href$="' + current_section + '"]').parent().addClass('active')
}

$(function () {
    // Lock the table of content to a fixed position once we scroll enough
    var tocOffset = $('.related-wrapper').outerHeight();
    var marginTop = parseFloat($('.sphinxsidebarwrapper').css('margin-top').replace(/auto/, 0));
    var top = $('.sphinxsidebarwrapper').offset().top - marginTop;
    sections = {};
    url = document.URL.replace(/#.*$/, "");

    // Grab positions of our sections
    $('.headerlink').each(function(){
        sections[this.href.replace(url, '')] = $(this).offset().top - 50
    });

    updateSideBarPosition(top, tocOffset, sections);

    $(window).scroll(function(event) {
        updateSideBarPosition(top, tocOffset, sections)
    });

    $(window).resize(function(event) {
        tocOffset = $('.related-wrapper').outerHeight();
        updateSideBarPosition(top, tocOffset, sections)
    });
});</script><script>var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-41920728-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();</script></head><body><div id=logo-banner><div class=logo><a href=../../index.html> <img alt="Nilearn logo"border=0 src=../../_static/nilearn-logo.png> </a></div><div class=tags><ul><li><big><a href=../decoding/plot_haxby_anova_svm.html>SVM</a></big></li><li><small><a href=../../connectivity/parcellating.html>Ward clustering</a></small></li><li><a href=../../decoding/searchlight.html>Searchlight</a></li><li><big><a href=../../connectivity/resting_state_networks.html>ICA</a></big></li><li><a href=../../manipulating_images/data_preparation.html>Nifti IO</a></li><li><a href=../../modules/reference.html#module-nilearn.datasets>Datasets</a></li></ul></div><div class=banner><h1>Nilearn:</h1><h2>Statistics for NeuroImaging in Python</h2></div><div class=search_form><div class=gcse-search id=cse style=width:100%></div><script>(function() {
        var cx = '017289614950330089114:elrt9qoutrq';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();</script></div></div><div class=related-wrapper><div aria-label="related navigation"class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="Python Module Index"href=../../py-modindex.html>modules</a></li><li class=right><a title="9.3.15. Encoding models for visual stimuli from Miyawaki et al. 2008"accesskey=N href=plot_miyawaki_encoding.html>next</a> |</li><li class=right><a title="9.3.13. Voxel-Based Morphometry on Oasis dataset"accesskey=P href=plot_oasis_vbm.html>previous</a> |</li><li><a href=../../index.html>Nilearn Home</a> | </li><li><a href=../../user_guide.html>User Guide</a> | </li><li><a href=../index.html>Examples</a> | </li><li><a href=../../modules/reference.html>Reference</a> | </li><li id=navbar-about><a href=../../authors.html>About</a>| </li><li id=navbar-ecosystem><a href=http://www.nipy.org/>Nipy ecosystem</a></li><li class="nav-item nav-item-1"><a href=../../user_guide.html>User guide: table of contents</a> »</li><li class="nav-item nav-item-2"><a accesskey=U href=../index.html>9. Nilearn usage examples</a> »</li></ul></div></div><div class=document><div class=documentwrapper><div class=bodywrapper><div class=body role=main><div class="sphx-glr-download-link-note admonition note"><p class="first admonition-title">Note</p><p class=last>Click <a class="reference internal"href=#sphx-glr-download-auto-examples-02-decoding-plot-simulated-data-py><span class="std std-ref">here</span></a> to download the full example code or to run this example in your browser via Binder</p></div><div class="sphx-glr-example-title section"id=example-of-pattern-recognition-on-simulated-data><span id=sphx-glr-auto-examples-02-decoding-plot-simulated-data-py></span><h1>9.3.14. Example of pattern recognition on simulated data<a title="Permalink to this headline"class=headerlink href=#example-of-pattern-recognition-on-simulated-data>¶</a></h1><p>This example simulates data according to a very simple sketch of brain imaging data and applies machine learning techniques to predict output values.</p><p>We use a very simple generating function to simulate data, as in <a class="reference external"href=http://dx.doi.org/10.1109/TMI.2011.2113378>Michel et al. 2012</a> , a linear model with a random design matrix <strong>X</strong>:</p><div class=math><p><img alt="\mathbf{y} = \mathbf{X} \mathbf{w} + \mathbf{e}"src=../../_images/math/7d8d08f5e50836c75ba7a937208fbbff4ddd3d6f.png></p></div><ul class=simple><li><strong>w</strong>: the weights of the linear model correspond to the predictive brain regions. Here, in the simulations, they form a 3D image with 5, four of which in opposite corners and one in the middle, as plotted below.</li><li><strong>X</strong>: the design matrix corresponds to the observed fMRI data. Here we simulate random normal variables and smooth them as in Gaussian fields.</li><li><strong>e</strong> is random normal noise.</li></ul><div class="highlight-default notranslate"><div class=highlight><pre><span></span><span class=c1># Licence : BSD</span>

<span class=nb>print</span><span class=p>(</span><span class=vm>__doc__</span><span class=p>)</span>

<span class=kn>from</span> <span class=nn>time</span> <span class=k>import</span> <a class="sphx-glr-backref-module-time sphx-glr-backref-type-py-function"href=https://docs.python.org/3.6/library/time.html#time.time title=time.time><span class=n>time</span></a>

<span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
<span class=kn>from</span> <span class=nn>scipy</span> <span class=k>import</span> <span class=n>linalg</span><span class=p>,</span> <span class=n>ndimage</span>

<span class=kn>from</span> <span class=nn>sklearn</span> <span class=k>import</span> <span class=n>linear_model</span><span class=p>,</span> <span class=n>svm</span>
<span class=kn>from</span> <span class=nn>sklearn.utils</span> <span class=k>import</span> <a class="sphx-glr-backref-module-sklearn-utils sphx-glr-backref-type-py-function"href=https://scikit-learn.org/stable/modules/generated/sklearn.utils.check_random_state.html#sklearn.utils.check_random_state title=sklearn.utils.check_random_state><span class=n>check_random_state</span></a>
<span class=kn>from</span> <span class=nn>sklearn.model_selection</span> <span class=k>import</span> <a class="sphx-glr-backref-module-sklearn-model_selection sphx-glr-backref-type-py-class"href=https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.KFold.html#sklearn.model_selection.KFold title=sklearn.model_selection.KFold><span class=n>KFold</span></a>
<span class=kn>from</span> <span class=nn>sklearn.feature_selection</span> <span class=k>import</span> <a class="sphx-glr-backref-module-sklearn-feature_selection sphx-glr-backref-type-py-function"href=https://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.f_regression.html#sklearn.feature_selection.f_regression title=sklearn.feature_selection.f_regression><span class=n>f_regression</span></a>

<span class=kn>import</span> <span class=nn>nibabel</span>

<span class=kn>from</span> <span class=nn>nilearn</span> <span class=k>import</span> <span class=n>decoding</span>
<span class=kn>import</span> <span class=nn>nilearn.masking</span>
<span class=kn>from</span> <span class=nn>nilearn.plotting</span> <span class=k>import</span> <a class="sphx-glr-backref-module-nilearn-plotting sphx-glr-backref-type-py-function"href=../../modules/generated/nilearn.plotting.show.html#nilearn.plotting.show title=nilearn.plotting.show><span class=n>show</span></a>
</pre></div></div><div class=section id=a-function-to-generate-data><h2>9.3.14.1. A function to generate data<a title="Permalink to this headline"class=headerlink href=#a-function-to-generate-data>¶</a></h2><div class="highlight-default notranslate"><div class=highlight><pre><span></span><span class=k>def</span> <span class=nf>create_simulation_data</span><span class=p>(</span><span class=n>snr</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>n_samples</span><span class=o>=</span><span class=mi>2</span> <span class=o>*</span> <span class=mi>100</span><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=o>=</span><span class=mi>12</span><span class=p>,</span> <span class=n>random_state</span><span class=o>=</span><span class=mi>1</span><span class=p>):</span>
    <span class=n>generator</span> <span class=o>=</span> <a class="sphx-glr-backref-module-sklearn-utils sphx-glr-backref-type-py-function"href=https://scikit-learn.org/stable/modules/generated/sklearn.utils.check_random_state.html#sklearn.utils.check_random_state title=sklearn.utils.check_random_state><span class=n>check_random_state</span></a><span class=p>(</span><span class=n>random_state</span><span class=p>)</span>
    <span class=n>roi_size</span> <span class=o>=</span> <span class=mi>2</span>  <span class=c1># size / 3</span>
    <span class=n>smooth_X</span> <span class=o>=</span> <span class=mi>1</span>
    <span class=c1># Coefs</span>
    <span class=n>w</span> <span class=o>=</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"href=https://numpy.org/doc/stable/reference/generated/numpy.zeros.html#numpy.zeros title=numpy.zeros><span class=n>np</span><span class=o>.</span><span class=n>zeros</span></a><span class=p>((</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>))</span>
    <span class=n>w</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=n>roi_size</span><span class=p>,</span> <span class=mi>0</span><span class=p>:</span><span class=n>roi_size</span><span class=p>,</span> <span class=mi>0</span><span class=p>:</span><span class=n>roi_size</span><span class=p>]</span> <span class=o>=</span> <span class=o>-</span><span class=mf>0.6</span>
    <span class=n>w</span><span class=p>[</span><span class=o>-</span><span class=n>roi_size</span><span class=p>:,</span> <span class=o>-</span><span class=n>roi_size</span><span class=p>:,</span> <span class=mi>0</span><span class=p>:</span><span class=n>roi_size</span><span class=p>]</span> <span class=o>=</span> <span class=mf>0.5</span>
    <span class=n>w</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=n>roi_size</span><span class=p>,</span> <span class=o>-</span><span class=n>roi_size</span><span class=p>:,</span> <span class=o>-</span><span class=n>roi_size</span><span class=p>:]</span> <span class=o>=</span> <span class=o>-</span><span class=mf>0.6</span>
    <span class=n>w</span><span class=p>[</span><span class=o>-</span><span class=n>roi_size</span><span class=p>:,</span> <span class=mi>0</span><span class=p>:</span><span class=n>roi_size</span><span class=p>:,</span> <span class=o>-</span><span class=n>roi_size</span><span class=p>:]</span> <span class=o>=</span> <span class=mf>0.5</span>
    <span class=n>w</span><span class=p>[(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a> <span class=o>-</span> <span class=n>roi_size</span><span class=p>)</span> <span class=o>//</span> <span class=mi>2</span><span class=p>:(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a> <span class=o>+</span> <span class=n>roi_size</span><span class=p>)</span> <span class=o>//</span> <span class=mi>2</span><span class=p>,</span>
    <span class=p>(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a> <span class=o>-</span> <span class=n>roi_size</span><span class=p>)</span> <span class=o>//</span> <span class=mi>2</span><span class=p>:(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a> <span class=o>+</span> <span class=n>roi_size</span><span class=p>)</span> <span class=o>//</span> <span class=mi>2</span><span class=p>,</span>
    <span class=p>(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a> <span class=o>-</span> <span class=n>roi_size</span><span class=p>)</span> <span class=o>//</span> <span class=mi>2</span><span class=p>:(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a> <span class=o>+</span> <span class=n>roi_size</span><span class=p>)</span> <span class=o>//</span> <span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=mf>0.5</span>
    <span class=n>w</span> <span class=o>=</span> <span class=n>w</span><span class=o>.</span><span class=n>ravel</span><span class=p>()</span>
    <span class=c1># Generate smooth background noise</span>
    <span class=n>XX</span> <span class=o>=</span> <span class=n>generator</span><span class=o>.</span><span class=n>randn</span><span class=p>(</span><span class=n>n_samples</span><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>)</span>
    <span class=n>noise</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n_samples</span><span class=p>):</span>
        <span class=n>Xi</span> <span class=o>=</span> <a class="sphx-glr-backref-module-scipy-ndimage sphx-glr-backref-type-py-function"href=https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.gaussian_filter.html#scipy.ndimage.gaussian_filter title=scipy.ndimage.gaussian_filter><span class=n>ndimage</span><span class=o>.</span><span class=n>filters</span><span class=o>.</span><span class=n>gaussian_filter</span></a><span class=p>(</span><span class=n>XX</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=p>:,</span> <span class=p>:,</span> <span class=p>:],</span> <span class=n>smooth_X</span><span class=p>)</span>
        <span class=n>Xi</span> <span class=o>=</span> <span class=n>Xi</span><span class=o>.</span><span class=n>ravel</span><span class=p>()</span>
        <span class=n>noise</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Xi</span><span class=p>)</span>
    <span class=n>noise</span> <span class=o>=</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"href=https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array title=numpy.array><span class=n>np</span><span class=o>.</span><span class=n>array</span></a><span class=p>(</span><span class=n>noise</span><span class=p>)</span>
    <span class=c1># Generate the signal y</span>
    <span class=n>y</span> <span class=o>=</span> <span class=n>generator</span><span class=o>.</span><span class=n>randn</span><span class=p>(</span><span class=n>n_samples</span><span class=p>)</span>
    <span class=n>X</span> <span class=o>=</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"href=https://numpy.org/doc/stable/reference/generated/numpy.dot.html#numpy.dot title=numpy.dot><span class=n>np</span><span class=o>.</span><span class=n>dot</span></a><span class=p>(</span><span class=n>y</span><span class=p>[:,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-data"href=https://numpy.org/doc/stable/reference/constants.html#numpy.newaxis title=numpy.newaxis><span class=n>np</span><span class=o>.</span><span class=n>newaxis</span></a><span class=p>],</span> <span class=n>w</span><span class=p>[</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-data"href=https://numpy.org/doc/stable/reference/constants.html#numpy.newaxis title=numpy.newaxis><span class=n>np</span><span class=o>.</span><span class=n>newaxis</span></a><span class=p>])</span>
    <span class=n>norm_noise</span> <span class=o>=</span> <a class="sphx-glr-backref-module-scipy-linalg sphx-glr-backref-type-py-function"href=https://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.norm.html#scipy.linalg.norm title=scipy.linalg.norm><span class=n>linalg</span><span class=o>.</span><span class=n>norm</span></a><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=o>/</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-data"href=https://numpy.org/doc/stable/reference/generated/numpy.exp.html#numpy.exp title=numpy.exp><span class=n>np</span><span class=o>.</span><span class=n>exp</span></a><span class=p>(</span><span class=n>snr</span> <span class=o>/</span> <span class=mf>20.</span><span class=p>)</span>
    <span class=n>noise_coef</span> <span class=o>=</span> <span class=n>norm_noise</span> <span class=o>/</span> <a class="sphx-glr-backref-module-scipy-linalg sphx-glr-backref-type-py-function"href=https://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.norm.html#scipy.linalg.norm title=scipy.linalg.norm><span class=n>linalg</span><span class=o>.</span><span class=n>norm</span></a><span class=p>(</span><span class=n>noise</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
    <span class=n>noise</span> <span class=o>*=</span> <span class=n>noise_coef</span>
    <span class=n>snr</span> <span class=o>=</span> <span class=mi>20</span> <span class=o>*</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-data"href=https://numpy.org/doc/stable/reference/generated/numpy.log.html#numpy.log title=numpy.log><span class=n>np</span><span class=o>.</span><span class=n>log</span></a><span class=p>(</span><a class="sphx-glr-backref-module-scipy-linalg sphx-glr-backref-type-py-function"href=https://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.norm.html#scipy.linalg.norm title=scipy.linalg.norm><span class=n>linalg</span><span class=o>.</span><span class=n>norm</span></a><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=o>/</span> <a class="sphx-glr-backref-module-scipy-linalg sphx-glr-backref-type-py-function"href=https://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.norm.html#scipy.linalg.norm title=scipy.linalg.norm><span class=n>linalg</span><span class=o>.</span><span class=n>norm</span></a><span class=p>(</span><span class=n>noise</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>"SNR: </span><span class=si>%.1f</span><span class=s2> dB"</span> <span class=o>%</span> <span class=n>snr</span><span class=p>)</span>
    <span class=c1># Mixing of signal + noise and splitting into train/test</span>
    <span class=n>X</span> <span class=o>+=</span> <span class=n>noise</span>
    <span class=n>X</span> <span class=o>-=</span> <span class=n>X</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>axis</span><span class=o>=-</span><span class=mi>1</span><span class=p>)[:,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-data"href=https://numpy.org/doc/stable/reference/constants.html#numpy.newaxis title=numpy.newaxis><span class=n>np</span><span class=o>.</span><span class=n>newaxis</span></a><span class=p>]</span>
    <span class=n>X</span> <span class=o>/=</span> <span class=n>X</span><span class=o>.</span><span class=n>std</span><span class=p>(</span><span class=n>axis</span><span class=o>=-</span><span class=mi>1</span><span class=p>)[:,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-data"href=https://numpy.org/doc/stable/reference/constants.html#numpy.newaxis title=numpy.newaxis><span class=n>np</span><span class=o>.</span><span class=n>newaxis</span></a><span class=p>]</span>
    <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>X_test</span></a> <span class=o>=</span> <span class=n>X</span><span class=p>[</span><span class=n>n_samples</span> <span class=o>//</span> <span class=mi>2</span><span class=p>:,</span> <span class=p>:]</span>
    <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>X_train</span></a> <span class=o>=</span> <span class=n>X</span><span class=p>[:</span><span class=n>n_samples</span> <span class=o>//</span> <span class=mi>2</span><span class=p>,</span> <span class=p>:]</span>
    <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>y_test</span></a> <span class=o>=</span> <span class=n>y</span><span class=p>[</span><span class=n>n_samples</span> <span class=o>//</span> <span class=mi>2</span><span class=p>:]</span>
    <span class=n>y</span> <span class=o>=</span> <span class=n>y</span><span class=p>[:</span><span class=n>n_samples</span> <span class=o>//</span> <span class=mi>2</span><span class=p>]</span>

    <span class=k>return</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>X_train</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>X_test</span></a><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>y_test</span></a><span class=p>,</span> <span class=n>snr</span><span class=p>,</span> <span class=n>w</span><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a>
</pre></div></div></div><div class=section id=a-simple-function-to-plot-slices><h2>9.3.14.2. A simple function to plot slices<a title="Permalink to this headline"class=headerlink href=#a-simple-function-to-plot-slices>¶</a></h2><div class="highlight-default notranslate"><div class=highlight><pre><span></span><span class=k>def</span> <span class=nf>plot_slices</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>title</span></a><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
    <a class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"href=https://matplotlib.org/api/_as_gen/matplotlib.pyplot.figure.html#matplotlib.pyplot.figure title=matplotlib.pyplot.figure><span class=n>plt</span><span class=o>.</span><span class=n>figure</span></a><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mf>5.5</span><span class=p>,</span> <span class=mf>2.2</span><span class=p>))</span>
    <span class=n>vmax</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>abs</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=o>.</span><span class=n>max</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>11</span><span class=p>):</span>
        <a class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"href=https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplot.html#matplotlib.pyplot.subplot title=matplotlib.pyplot.subplot><span class=n>plt</span><span class=o>.</span><span class=n>subplot</span></a><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>i</span> <span class=o>//</span> <span class=mi>5</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
        <a class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"href=https://matplotlib.org/api/_as_gen/matplotlib.pyplot.imshow.html#matplotlib.pyplot.imshow title=matplotlib.pyplot.imshow><span class=n>plt</span><span class=o>.</span><span class=n>imshow</span></a><span class=p>(</span><span class=n>data</span><span class=p>[:,</span> <span class=p>:,</span> <span class=n>i</span><span class=p>],</span> <span class=n>vmin</span><span class=o>=-</span><span class=n>vmax</span><span class=p>,</span> <span class=n>vmax</span><span class=o>=</span><span class=n>vmax</span><span class=p>,</span>
                   <span class=n>interpolation</span><span class=o>=</span><span class=s2>"nearest"</span><span class=p>,</span> <span class=n>cmap</span><span class=o>=</span><a class="sphx-glr-backref-module-matplotlib-colors sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://matplotlib.org/api/_as_gen/matplotlib.colors.LinearSegmentedColormap.html#matplotlib.colors.LinearSegmentedColormap title=matplotlib.colors.LinearSegmentedColormap><span class=n>plt</span><span class=o>.</span><span class=n>cm</span><span class=o>.</span><span class=n>RdBu_r</span></a><span class=p>)</span>
        <a class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"href=https://matplotlib.org/api/_as_gen/matplotlib.pyplot.xticks.html#matplotlib.pyplot.xticks title=matplotlib.pyplot.xticks><span class=n>plt</span><span class=o>.</span><span class=n>xticks</span></a><span class=p>(())</span>
        <a class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"href=https://matplotlib.org/api/_as_gen/matplotlib.pyplot.yticks.html#matplotlib.pyplot.yticks title=matplotlib.pyplot.yticks><span class=n>plt</span><span class=o>.</span><span class=n>yticks</span></a><span class=p>(())</span>
    <a class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"href=https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplots_adjust.html#matplotlib.pyplot.subplots_adjust title=matplotlib.pyplot.subplots_adjust><span class=n>plt</span><span class=o>.</span><span class=n>subplots_adjust</span></a><span class=p>(</span><span class=n>hspace</span><span class=o>=</span><span class=mf>0.05</span><span class=p>,</span> <span class=n>wspace</span><span class=o>=</span><span class=mf>0.05</span><span class=p>,</span> <span class=n>left</span><span class=o>=.</span><span class=mi>03</span><span class=p>,</span> <span class=n>right</span><span class=o>=.</span><span class=mi>97</span><span class=p>,</span> <span class=n>top</span><span class=o>=.</span><span class=mi>9</span><span class=p>)</span>
    <span class=k>if</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>title</span></a> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <a class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"href=https://matplotlib.org/api/_as_gen/matplotlib.pyplot.suptitle.html#matplotlib.pyplot.suptitle title=matplotlib.pyplot.suptitle><span class=n>plt</span><span class=o>.</span><span class=n>suptitle</span></a><span class=p>(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>title</span></a><span class=p>,</span> <span class=n>y</span><span class=o>=.</span><span class=mi>95</span><span class=p>)</span>
</pre></div></div></div><div class=section id=create-data><h2>9.3.14.3. Create data<a title="Permalink to this headline"class=headerlink href=#create-data>¶</a></h2><div class="highlight-default notranslate"><div class=highlight><pre><span></span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>X_train</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>X_test</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>y_train</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>y_test</span></a><span class=p>,</span> <span class=n>snr</span><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>coefs</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a> <span class=o>=</span> \
    <span class=n>create_simulation_data</span><span class=p>(</span><span class=n>snr</span><span class=o>=-</span><span class=mi>10</span><span class=p>,</span> <span class=n>n_samples</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=o>=</span><span class=mi>12</span><span class=p>)</span>

<span class=c1># Create masks for SearchLight. process_mask is the voxels where SearchLight</span>
<span class=c1># computation is performed. It is a subset of the brain mask, just to reduce</span>
<span class=c1># computation time.</span>
<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>mask</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"href=https://numpy.org/doc/stable/reference/generated/numpy.ones.html#numpy.ones title=numpy.ones><span class=n>np</span><span class=o>.</span><span class=n>ones</span></a><span class=p>((</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>),</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class"href=https://docs.python.org/3.6/library/functions.html#bool title=builtins.bool><span class=n>np</span><span class=o>.</span><span class=n>bool</span></a><span class=p>)</span>
<a class="sphx-glr-backref-module-nibabel-nifti1 sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://nipy.org/nibabel/reference/nibabel.nifti1.html#nibabel.nifti1.Nifti1Image title=nibabel.nifti1.Nifti1Image><span class=n>mask_img</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-nibabel-nifti1 sphx-glr-backref-type-py-class"href=https://nipy.org/nibabel/reference/nibabel.nifti1.html#nibabel.nifti1.Nifti1Image title=nibabel.nifti1.Nifti1Image><span class=n>nibabel</span><span class=o>.</span><span class=n>Nifti1Image</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>mask</span></a><span class=o>.</span><span class=n>astype</span><span class=p>(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>np</span><span class=o>.</span><span class=n>int</span></a><span class=p>),</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"href=https://numpy.org/doc/stable/reference/generated/numpy.eye.html#numpy.eye title=numpy.eye><span class=n>np</span><span class=o>.</span><span class=n>eye</span></a><span class=p>(</span><span class=mi>4</span><span class=p>))</span>
<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>process_mask</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"href=https://numpy.org/doc/stable/reference/generated/numpy.zeros.html#numpy.zeros title=numpy.zeros><span class=n>np</span><span class=o>.</span><span class=n>zeros</span></a><span class=p>((</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>),</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class"href=https://docs.python.org/3.6/library/functions.html#bool title=builtins.bool><span class=n>np</span><span class=o>.</span><span class=n>bool</span></a><span class=p>)</span>
<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>process_mask</span></a><span class=p>[:,</span> <span class=p>:,</span> <span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>process_mask</span></a><span class=p>[:,</span> <span class=p>:,</span> <span class=mi>6</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>process_mask</span></a><span class=p>[:,</span> <span class=p>:,</span> <span class=mi>11</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
<a class="sphx-glr-backref-module-nibabel-nifti1 sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://nipy.org/nibabel/reference/nibabel.nifti1.html#nibabel.nifti1.Nifti1Image title=nibabel.nifti1.Nifti1Image><span class=n>process_mask_img</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-nibabel-nifti1 sphx-glr-backref-type-py-class"href=https://nipy.org/nibabel/reference/nibabel.nifti1.html#nibabel.nifti1.Nifti1Image title=nibabel.nifti1.Nifti1Image><span class=n>nibabel</span><span class=o>.</span><span class=n>Nifti1Image</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>process_mask</span></a><span class=o>.</span><span class=n>astype</span><span class=p>(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>np</span><span class=o>.</span><span class=n>int</span></a><span class=p>),</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"href=https://numpy.org/doc/stable/reference/generated/numpy.eye.html#numpy.eye title=numpy.eye><span class=n>np</span><span class=o>.</span><span class=n>eye</span></a><span class=p>(</span><span class=mi>4</span><span class=p>))</span>

<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>coefs</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"href=https://numpy.org/doc/stable/reference/generated/numpy.reshape.html#numpy.reshape title=numpy.reshape><span class=n>np</span><span class=o>.</span><span class=n>reshape</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>coefs</span></a><span class=p>,</span> <span class=p>[</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>])</span>
<span class=n>plot_slices</span><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>coefs</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>title</span></a><span class=o>=</span><span class=s2>"Ground truth"</span><span class=p>)</span>
</pre></div></div><img alt="Ground truth"class=sphx-glr-single-img src=../../_images/sphx_glr_plot_simulated_data_001.png><p class=sphx-glr-script-out>Out:</p><div class="sphx-glr-script-out highlight-none notranslate"><div class=highlight><pre><span></span>SNR: -10.0 dB
</pre></div></div></div><div class=section id=run-different-estimators><h2>9.3.14.4. Run different estimators<a title="Permalink to this headline"class=headerlink href=#run-different-estimators>¶</a></h2><blockquote><div><p>We can now run different estimators and look at their prediction score, as well as the feature maps that they recover. Namely, we will use</p><ul class=simple><li>A support vector regression (<a class="reference external"href=http://scikit-learn.org/stable/modules/svm.html>SVM</a>)</li><li>An <a class="reference external"href=http://scikit-learn.org/stable/modules/linear_model.html#elastic-net>elastic-net</a></li><li>A <em>Bayesian</em> ridge estimator, i.e. a ridge estimator that sets its parameter according to a metaprior</li><li>A ridge estimator that set its parameter by cross-validation</li></ul><p>Note that the <cite>RidgeCV</cite> and the <cite>ElasticNetCV</cite> have names ending in <cite>CV</cite> that stands for <cite>cross-validation</cite>: in the list of possible <cite>alpha</cite> values that they are given, they choose the best by cross-validation.</p></div></blockquote><div class="highlight-default notranslate"><div class=highlight><pre><span></span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#list title=builtins.list><span class=n>estimators</span></a> <span class=o>=</span> <span class=p>[</span>
    <span class=p>(</span><span class=s1>'bayesian_ridge'</span><span class=p>,</span> <a class="sphx-glr-backref-module-sklearn-linear_model sphx-glr-backref-type-py-class"href=https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.BayesianRidge.html#sklearn.linear_model.BayesianRidge title=sklearn.linear_model.BayesianRidge><span class=n>linear_model</span><span class=o>.</span><span class=n>BayesianRidge</span></a><span class=p>(</span><span class=n>normalize</span><span class=o>=</span><span class=kc>True</span><span class=p>)),</span>
    <span class=p>(</span><span class=s1>'enet_cv'</span><span class=p>,</span> <a class="sphx-glr-backref-module-sklearn-linear_model sphx-glr-backref-type-py-class"href=https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.ElasticNetCV.html#sklearn.linear_model.ElasticNetCV title=sklearn.linear_model.ElasticNetCV><span class=n>linear_model</span><span class=o>.</span><span class=n>ElasticNetCV</span></a><span class=p>(</span><span class=n>alphas</span><span class=o>=</span><span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>],</span>
                                          <span class=n>l1_ratio</span><span class=o>=</span><span class=mf>0.05</span><span class=p>)),</span>
    <span class=p>(</span><span class=s1>'ridge_cv'</span><span class=p>,</span> <a class="sphx-glr-backref-module-sklearn-linear_model sphx-glr-backref-type-py-class"href=https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.RidgeCV.html#sklearn.linear_model.RidgeCV title=sklearn.linear_model.RidgeCV><span class=n>linear_model</span><span class=o>.</span><span class=n>RidgeCV</span></a><span class=p>(</span><span class=n>alphas</span><span class=o>=</span><span class=p>[</span><span class=mi>100</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>],</span> <span class=n>cv</span><span class=o>=</span><span class=mi>5</span><span class=p>)),</span>
    <span class=p>(</span><span class=s1>'svr'</span><span class=p>,</span> <a class="sphx-glr-backref-module-sklearn-svm sphx-glr-backref-type-py-class"href=https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVR.html#sklearn.svm.SVR title=sklearn.svm.SVR><span class=n>svm</span><span class=o>.</span><span class=n>SVR</span></a><span class=p>(</span><span class=n>kernel</span><span class=o>=</span><span class=s1>'linear'</span><span class=p>,</span> <span class=n>C</span><span class=o>=</span><span class=mf>0.001</span><span class=p>)),</span>
    <span class=p>(</span><span class=s1>'searchlight'</span><span class=p>,</span> <a class="sphx-glr-backref-module-nilearn-decoding sphx-glr-backref-type-py-class"href=../../modules/generated/nilearn.decoding.SearchLight.html#nilearn.decoding.SearchLight title=nilearn.decoding.SearchLight><span class=n>decoding</span><span class=o>.</span><span class=n>SearchLight</span></a><span class=p>(</span><a class="sphx-glr-backref-module-nibabel-nifti1 sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://nipy.org/nibabel/reference/nibabel.nifti1.html#nibabel.nifti1.Nifti1Image title=nibabel.nifti1.Nifti1Image><span class=n>mask_img</span></a><span class=p>,</span>
                                         <a class="sphx-glr-backref-module-nibabel-nifti1 sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://nipy.org/nibabel/reference/nibabel.nifti1.html#nibabel.nifti1.Nifti1Image title=nibabel.nifti1.Nifti1Image><span class=n>process_mask_img</span></a><span class=o>=</span><a class="sphx-glr-backref-module-nibabel-nifti1 sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://nipy.org/nibabel/reference/nibabel.nifti1.html#nibabel.nifti1.Nifti1Image title=nibabel.nifti1.Nifti1Image><span class=n>process_mask_img</span></a><span class=p>,</span>
                                         <span class=n>radius</span><span class=o>=</span><span class=mf>2.7</span><span class=p>,</span>
                                         <span class=n>scoring</span><span class=o>=</span><span class=s1>'r2'</span><span class=p>,</span>
                                         <a class="sphx-glr-backref-module-nilearn-decoding sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=../../modules/generated/nilearn.decoding.SearchLight.html#nilearn.decoding.SearchLight title=nilearn.decoding.SearchLight><span class=n>estimator</span></a><span class=o>=</span><a class="sphx-glr-backref-module-sklearn-svm sphx-glr-backref-type-py-class"href=https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVR.html#sklearn.svm.SVR title=sklearn.svm.SVR><span class=n>svm</span><span class=o>.</span><span class=n>SVR</span></a><span class=p>(</span><span class=n>kernel</span><span class=o>=</span><span class=s2>"linear"</span><span class=p>),</span>
                                         <span class=n>cv</span><span class=o>=</span><a class="sphx-glr-backref-module-sklearn-model_selection sphx-glr-backref-type-py-class"href=https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.KFold.html#sklearn.model_selection.KFold title=sklearn.model_selection.KFold><span class=n>KFold</span></a><span class=p>(</span><span class=n>n_splits</span><span class=o>=</span><span class=mi>4</span><span class=p>),</span>
                                         <span class=n>verbose</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
                                         <span class=n>n_jobs</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
                                         <span class=p>)</span>
     <span class=p>)</span>
<span class=p>]</span>
</pre></div></div><p>Run the estimators</p><p>As the estimators expose a fairly consistent API, we can all fit them in a for loop: they all have a <cite>fit</cite> method for fitting the data, a <cite>score</cite> method to retrieve the prediction score, and because they are all linear models, a <cite>coef_</cite> attribute that stores the coefficients <strong>w</strong> estimated</p><div class="highlight-default notranslate"><div class=highlight><pre><span></span><span class=k>for</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>name</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-nilearn-decoding sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=../../modules/generated/nilearn.decoding.SearchLight.html#nilearn.decoding.SearchLight title=nilearn.decoding.SearchLight><span class=n>estimator</span></a> <span class=ow>in</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#list title=builtins.list><span class=n>estimators</span></a><span class=p>:</span>
    <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#float title=builtins.float><span class=n>t1</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-time sphx-glr-backref-type-py-function"href=https://docs.python.org/3.6/library/time.html#time.time title=time.time><span class=n>time</span></a><span class=p>()</span>
    <span class=k>if</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>name</span></a> <span class=o>!=</span> <span class=s2>"searchlight"</span><span class=p>:</span>
        <a class="sphx-glr-backref-module-nilearn-decoding sphx-glr-backref-type-py-method"href=../../modules/generated/nilearn.decoding.SearchLight.html#nilearn.decoding.SearchLight.fit title=nilearn.decoding.SearchLight.fit><span class=n>estimator</span><span class=o>.</span><span class=n>fit</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>X_train</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>y_train</span></a><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>X</span> <span class=o>=</span> <a class="sphx-glr-backref-module-nilearn-masking sphx-glr-backref-type-py-function"href=../../modules/generated/nilearn.masking.unmask.html#nilearn.masking.unmask title=nilearn.masking.unmask><span class=n>nilearn</span><span class=o>.</span><span class=n>masking</span><span class=o>.</span><span class=n>unmask</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>X_train</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-nibabel-nifti1 sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://nipy.org/nibabel/reference/nibabel.nifti1.html#nibabel.nifti1.Nifti1Image title=nibabel.nifti1.Nifti1Image><span class=n>mask_img</span></a><span class=p>)</span>
        <a class="sphx-glr-backref-module-nilearn-decoding sphx-glr-backref-type-py-method"href=../../modules/generated/nilearn.decoding.SearchLight.html#nilearn.decoding.SearchLight.fit title=nilearn.decoding.SearchLight.fit><span class=n>estimator</span><span class=o>.</span><span class=n>fit</span></a><span class=p>(</span><span class=n>X</span><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>y_train</span></a><span class=p>)</span>
        <span class=k>del</span> <span class=n>X</span>
    <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#float title=builtins.float><span class=n>elapsed_time</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-time sphx-glr-backref-type-py-function"href=https://docs.python.org/3.6/library/time.html#time.time title=time.time><span class=n>time</span></a><span class=p>()</span> <span class=o>-</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#float title=builtins.float><span class=n>t1</span></a>

    <span class=k>if</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>name</span></a> <span class=o>!=</span> <span class=s1>'searchlight'</span><span class=p>:</span>
        <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>coefs</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-nilearn-decoding sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=../../modules/generated/nilearn.decoding.SearchLight.html#nilearn.decoding.SearchLight title=nilearn.decoding.SearchLight><span class=n>estimator</span><span class=o>.</span><span class=n>coef_</span></a>
        <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>coefs</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"href=https://numpy.org/doc/stable/reference/generated/numpy.reshape.html#numpy.reshape title=numpy.reshape><span class=n>np</span><span class=o>.</span><span class=n>reshape</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>coefs</span></a><span class=p>,</span> <span class=p>[</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>])</span>
        <span class=n>score</span> <span class=o>=</span> <a class="sphx-glr-backref-module-nilearn-decoding sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=../../modules/generated/nilearn.decoding.SearchLight.html#nilearn.decoding.SearchLight title=nilearn.decoding.SearchLight><span class=n>estimator</span><span class=o>.</span><span class=n>score</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>X_test</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>y_test</span></a><span class=p>)</span>
        <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>title</span></a> <span class=o>=</span> <span class=s1>'</span><span class=si>%s</span><span class=s1>: prediction score </span><span class=si>%.3f</span><span class=s1>, training time: </span><span class=si>%.2f</span><span class=s1>s'</span> <span class=o>%</span> <span class=p>(</span>
            <a class="sphx-glr-backref-module-nilearn-decoding sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=../../modules/generated/nilearn.decoding.SearchLight.html#nilearn.decoding.SearchLight title=nilearn.decoding.SearchLight><span class=n>estimator</span></a><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=n>score</span><span class=p>,</span>
            <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#float title=builtins.float><span class=n>elapsed_time</span></a><span class=p>)</span>

    <span class=k>else</span><span class=p>:</span>  <span class=c1># Searchlight</span>
        <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>coefs</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>estimator</span><span class=o>.</span><span class=n>scores_</span></a>
        <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>title</span></a> <span class=o>=</span> <span class=s1>'</span><span class=si>%s</span><span class=s1>: training time: </span><span class=si>%.2f</span><span class=s1>s'</span> <span class=o>%</span> <span class=p>(</span>
            <a class="sphx-glr-backref-module-nilearn-decoding sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=../../modules/generated/nilearn.decoding.SearchLight.html#nilearn.decoding.SearchLight title=nilearn.decoding.SearchLight><span class=n>estimator</span></a><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span>
            <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#float title=builtins.float><span class=n>elapsed_time</span></a><span class=p>)</span>

    <span class=c1># We use the plot_slices function provided in the example to</span>
    <span class=c1># plot the results</span>
    <span class=n>plot_slices</span><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>coefs</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>title</span></a><span class=o>=</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>title</span></a><span class=p>)</span>

    <span class=nb>print</span><span class=p>(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>title</span></a><span class=p>)</span>

<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>f_values</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>p_values</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-sklearn-feature_selection sphx-glr-backref-type-py-function"href=https://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.f_regression.html#sklearn.feature_selection.f_regression title=sklearn.feature_selection.f_regression><span class=n>f_regression</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>X_train</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>y_train</span></a><span class=p>)</span>
<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>p_values</span></a> <span class=o>=</span> <a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"href=https://numpy.org/doc/stable/reference/generated/numpy.reshape.html#numpy.reshape title=numpy.reshape><span class=n>np</span><span class=o>.</span><span class=n>reshape</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>p_values</span></a><span class=p>,</span> <span class=p>(</span><a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/functions.html#int title=builtins.int><span class=n>size</span></a><span class=p>))</span>
<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>p_values</span></a> <span class=o>=</span> <span class=o>-</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-data"href=https://numpy.org/doc/stable/reference/generated/numpy.log10.html#numpy.log10 title=numpy.log10><span class=n>np</span><span class=o>.</span><span class=n>log10</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>p_values</span></a><span class=p>)</span>
<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>p_values</span></a><span class=p>[</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-data"href=https://numpy.org/doc/stable/reference/generated/numpy.isnan.html#numpy.isnan title=numpy.isnan><span class=n>np</span><span class=o>.</span><span class=n>isnan</span></a><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>p_values</span></a><span class=p>)]</span> <span class=o>=</span> <span class=mi>0</span>
<a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>p_values</span></a><span class=p>[</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>p_values</span></a> <span class=o>></span> <span class=mi>10</span><span class=p>]</span> <span class=o>=</span> <span class=mi>10</span>
<span class=n>plot_slices</span><span class=p>(</span><a class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray title=numpy.ndarray><span class=n>p_values</span></a><span class=p>,</span> <a class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"href=https://docs.python.org/3.6/library/stdtypes.html#str title=builtins.str><span class=n>title</span></a><span class=o>=</span><span class=s2>"f_regress"</span><span class=p>)</span>

<a class="sphx-glr-backref-module-nilearn-plotting sphx-glr-backref-type-py-function"href=../../modules/generated/nilearn.plotting.show.html#nilearn.plotting.show title=nilearn.plotting.show><span class=n>show</span></a><span class=p>()</span>
</pre></div></div><ul class=sphx-glr-horizontal><li><img alt="BayesianRidge: prediction score 0.114, training time: 0.06s"class="sphx-glr-multi-img first"src=../../_images/sphx_glr_plot_simulated_data_002.png></li><li><img alt="ElasticNetCV: prediction score 0.528, training time: 0.26s"class="sphx-glr-multi-img first"src=../../_images/sphx_glr_plot_simulated_data_003.png></li><li><img alt="RidgeCV: prediction score 0.328, training time: 0.05s"class="sphx-glr-multi-img first"src=../../_images/sphx_glr_plot_simulated_data_004.png></li><li><img alt="SVR: prediction score 0.345, training time: 0.01s"class="sphx-glr-multi-img first"src=../../_images/sphx_glr_plot_simulated_data_005.png></li><li><img alt="SearchLight: training time: 5.70s"class="sphx-glr-multi-img first"src=../../_images/sphx_glr_plot_simulated_data_006.png></li><li><img class="sphx-glr-multi-img first"alt=f_regress src=../../_images/sphx_glr_plot_simulated_data_007.png></li></ul><p class=sphx-glr-script-out>Out:</p><div class="sphx-glr-script-out highlight-none notranslate"><div class=highlight><pre><span></span>BayesianRidge: prediction score 0.114, training time: 0.06s
ElasticNetCV: prediction score 0.528, training time: 0.26s
RidgeCV: prediction score 0.328, training time: 0.05s
SVR: prediction score 0.345, training time: 0.01s
[Parallel(n_jobs=1)]: Using backend SequentialBackend with 1 concurrent workers.
Job #1, processed 0/432 voxels (0.00%, 121 seconds remaining)
Job #1, processed 10/432 voxels (2.31%, 5 seconds remaining)
Job #1, processed 20/432 voxels (4.63%, 5 seconds remaining)
Job #1, processed 30/432 voxels (6.94%, 5 seconds remaining)
Job #1, processed 40/432 voxels (9.26%, 5 seconds remaining)
Job #1, processed 50/432 voxels (11.57%, 5 seconds remaining)
Job #1, processed 60/432 voxels (13.89%, 5 seconds remaining)
Job #1, processed 70/432 voxels (16.20%, 5 seconds remaining)
Job #1, processed 80/432 voxels (18.52%, 5 seconds remaining)
Job #1, processed 90/432 voxels (20.83%, 4 seconds remaining)
Job #1, processed 100/432 voxels (23.15%, 4 seconds remaining)
Job #1, processed 110/432 voxels (25.46%, 4 seconds remaining)
Job #1, processed 120/432 voxels (27.78%, 4 seconds remaining)
Job #1, processed 130/432 voxels (30.09%, 4 seconds remaining)
Job #1, processed 140/432 voxels (32.41%, 4 seconds remaining)
Job #1, processed 150/432 voxels (34.72%, 3 seconds remaining)
Job #1, processed 160/432 voxels (37.04%, 3 seconds remaining)
Job #1, processed 170/432 voxels (39.35%, 3 seconds remaining)
Job #1, processed 180/432 voxels (41.67%, 3 seconds remaining)
Job #1, processed 190/432 voxels (43.98%, 3 seconds remaining)
Job #1, processed 200/432 voxels (46.30%, 3 seconds remaining)
Job #1, processed 210/432 voxels (48.61%, 2 seconds remaining)
Job #1, processed 220/432 voxels (50.93%, 2 seconds remaining)
Job #1, processed 230/432 voxels (53.24%, 2 seconds remaining)
Job #1, processed 240/432 voxels (55.56%, 2 seconds remaining)
Job #1, processed 250/432 voxels (57.87%, 2 seconds remaining)
Job #1, processed 260/432 voxels (60.19%, 2 seconds remaining)
Job #1, processed 270/432 voxels (62.50%, 2 seconds remaining)
Job #1, processed 280/432 voxels (64.81%, 1 seconds remaining)
Job #1, processed 290/432 voxels (67.13%, 1 seconds remaining)
Job #1, processed 300/432 voxels (69.44%, 1 seconds remaining)
Job #1, processed 310/432 voxels (71.76%, 1 seconds remaining)
Job #1, processed 320/432 voxels (74.07%, 1 seconds remaining)
Job #1, processed 330/432 voxels (76.39%, 1 seconds remaining)
Job #1, processed 340/432 voxels (78.70%, 1 seconds remaining)
Job #1, processed 350/432 voxels (81.02%, 1 seconds remaining)
Job #1, processed 360/432 voxels (83.33%, 0 seconds remaining)
Job #1, processed 370/432 voxels (85.65%, 0 seconds remaining)
Job #1, processed 380/432 voxels (87.96%, 0 seconds remaining)
Job #1, processed 390/432 voxels (90.28%, 0 seconds remaining)
Job #1, processed 400/432 voxels (92.59%, 0 seconds remaining)
Job #1, processed 410/432 voxels (94.91%, 0 seconds remaining)
Job #1, processed 420/432 voxels (97.22%, 0 seconds remaining)
Job #1, processed 430/432 voxels (99.54%, 0 seconds remaining)
[Parallel(n_jobs=1)]: Done   1 out of   1 | elapsed:    5.5s finished
SearchLight: training time: 5.70s
</pre></div></div></div><div class=section id=an-exercice-to-go-further><h2>9.3.14.5. An exercice to go further<a title="Permalink to this headline"class=headerlink href=#an-exercice-to-go-further>¶</a></h2><blockquote><div><p>As an exercice, you can use recursive feature elimination (RFE) with the SVM</p><p>Read the object’s documentation to find out how to use RFE.</p><p><strong>Performance tip</strong>: increase the <cite>step</cite> parameter, or it will be very slow.</p></div></blockquote><div class="highlight-default notranslate"><div class=highlight><pre><span></span><span class=kn>from</span> <span class=nn>sklearn.feature_selection</span> <span class=k>import</span> <span class=n>RFE</span>
</pre></div></div><p class=sphx-glr-timing><strong>Total running time of the script:</strong> ( 0 minutes 6.453 seconds)</p><div class="sphx-glr-footer class sphx-glr-footer-example docutils container"id=sphx-glr-download-auto-examples-02-decoding-plot-simulated-data-py><div class="binder-badge docutils container"><a class="reference external image-reference"href=https://mybinder.org/v2/gh/nilearn/nilearn.github.io/master?filepath=examples/auto_examples/02_decoding/plot_simulated_data.ipynb><img alt=https://mybinder.org/badge_logo.svg src=https://mybinder.org/badge_logo.svg width=150px></a></div><div class="sphx-glr-download sphx-glr-download-python docutils container"><a class="reference download internal"download href=../../_downloads/00b63a2f3c19f56521d9ac182410c025/plot_simulated_data.py><code class="xref download docutils literal notranslate"><span class=pre>Download</span> <span class=pre>Python</span> <span class=pre>source</span> <span class=pre>code:</span> <span class=pre>plot_simulated_data.py</span></code></a></div><div class="sphx-glr-download sphx-glr-download-jupyter docutils container"><a class="reference download internal"download href=../../_downloads/15bf7d6d499dfe919be74278af66d069/plot_simulated_data.ipynb><code class="xref download docutils literal notranslate"><span class=pre>Download</span> <span class=pre>Jupyter</span> <span class=pre>notebook:</span> <span class=pre>plot_simulated_data.ipynb</span></code></a></div></div><p class=sphx-glr-signature><a class="reference external"href=https://sphinx-gallery.github.io>Gallery generated by Sphinx-Gallery</a></p></div></div></div></div></div><div aria-label="main navigation"class=sphinxsidebar role=navigation><div class=sphinxsidebarwrapper><h4>Giving credit</h4><ul class=simple><li><p>Please consider <a href=../../authors.html#citing>citing the papers</a>.</p></li></ul><h3><a href=../../index.html>Table of Contents</a></h3><ul><li><a class="reference internal"href=#>9.3.14. Example of pattern recognition on simulated data</a><ul><li><a class="reference internal"href=#a-function-to-generate-data>9.3.14.1. A function to generate data</a></li><li><a class="reference internal"href=#a-simple-function-to-plot-slices>9.3.14.2. A simple function to plot slices</a></li><li><a class="reference internal"href=#create-data>9.3.14.3. Create data</a></li><li><a class="reference internal"href=#run-different-estimators>9.3.14.4. Run different estimators</a></li><li><a class="reference internal"href=#an-exercice-to-go-further>9.3.14.5. An exercice to go further</a></li></ul></li></ul><h4>Previous topic</h4><p class=topless><a title="previous chapter"href=plot_oasis_vbm.html>9.3.13. Voxel-Based Morphometry on Oasis dataset</a></p><h4>Next topic</h4><p class=topless><a title="next chapter"href=plot_miyawaki_encoding.html>9.3.15. Encoding models for visual stimuli from Miyawaki et al. 2008</a></p><div id=searchbox role=search style=display:none><h3>Quick search</h3><div class=searchformwrapper><form action=../../search.html class=search><input name=q><input type=submit value=Go><input name=check_keywords type=hidden value=yes><input name=area type=hidden value=default></form></div></div><script>$('#searchbox').show(0);</script></div></div><div class=clearer></div></div><div class=footer>© The nilearn developers 2010-2020. Created using <a href=http://sphinx.pocoo.org/>Sphinx</a> 1.8.5. <span style=padding-left:5ex> <a href=../../_sources/auto_examples/02_decoding/plot_simulated_data.rst.txt rel=nofollow>Show this page source</a> </span></div></body></html>